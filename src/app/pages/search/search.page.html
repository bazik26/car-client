<div class="search-page py-3">
  <div class="container">
    <div class="row">
      <div class="col-xl-3 col-lg-4 col-md-12">
        @if (form && BRANDS_AND_MODELS) {
          <form [formGroup]="form">
            <div class="form-control">
              <div class="form-group">
                <label class="form-label">Марка</label>
                <ng-select
                  [items]="brands"
                  bindLabel="title"
                  bindValue="title"
                  placeholder="Выберите марку"
                  [searchable]="true"
                  formControlName="brand"
                  (clear)="clearControl('brand')">
                >
                </ng-select>
              </div>

              <div class="mt-3 form-group">
                <label class="form-label">Модель</label>
                <ng-select
                  [items]="models"
                  bindLabel="title"
                  bindValue="title"
                  placeholder="Выберите модель"
                  [searchable]="true"
                  formControlName="model"
                  (clear)="clearControl('model')">
                >
                </ng-select>
              </div>

              <div class="mt-3 row">
                <div class="col">
                  <label class="form-label">Цена от</label>
                  <input
                    type="number"
                    class="form-control"
                    formControlName="priceStart"
                  />
                </div>

                <div class="col">
                  <label class="form-label">Цена до</label>
                  <input
                    type="number"
                    class="form-control"
                    formControlName="priceEnd"
                  />
                </div>
              </div>

              <div class="mt-3 row">
                <div class="col">
                  <label class="form-label">Год от</label>
                  <input
                    type="number"
                    class="form-control"
                    formControlName="yearStart"
                  />
                </div>

                <div class="col">
                  <label class="form-label">Год до</label>
                  <input
                    type="number"
                    class="form-control"
                    formControlName="yearEnd"
                  />
                </div>
              </div>

              <div class="mt-3 form-group">
                <label class="form-label">Коробка передач</label>
                <ng-select
                  [items]="gearboxes"
                  [multiple]="true"
                  [searchable]="true"
                  placeholder="Выберите коробку"
                  formControlName="gearbox"
                >
                </ng-select>
              </div>

              <div class="mt-3 form-group">
                <label class="form-label">Топливо</label>
                <ng-select
                  [items]="fuels"
                  [multiple]="true"
                  [searchable]="true"
                  placeholder="Выберите топливо"
                  formControlName="fuel"
                >
                </ng-select>
              </div>

              <div class="mt-3 form-group">
                <label class="form-label">Привод</label>
                <ng-select
                  [items]="drives"
                  [multiple]="true"
                  [searchable]="true"
                  placeholder="Выберите привод"
                  formControlName="drive"
                >
                </ng-select>
              </div>

              @for (group of options; track group) {
                <div class="form-group mt-3">
                  <label class="form-label">{{ group.title }}</label>
                  <ng-select
                    [items]="group.values"
                    [multiple]="true"
                    [searchable]="true"
                    placeholder="Выберите"
                    formControlName="{{ group.controlName }}"
                  >
                  </ng-select>
                </div>
              }
            </div>
          </form>
        }
      </div>

      <div class="col-xl-9 col-lg-8 col-md-12">
        <div class="row">
          @for (car of cars; track car?.id ?? $index) {
            <div class="mt-3 col-xl-3 col-lg-4 col-md-6 col-12">
              <app-car-item [car]="car"></app-car-item>
            </div>
          }
        </div>
      </div>
    </div>
  </div>
</div>
